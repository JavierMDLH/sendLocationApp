<!DOCTYPE html>
<html>
<head>
    <title>JavierM</title>
    <link rel="stylesheet" href="style.css"> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.1.2/socket.io.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" crossorigin="anonymous">
    <link rel="icon" href="favicon64.png" type="image/x-icon">

    <style>
        /* General styles */
        body {
            font-family: 'Merriweather', serif;
            background-color: #ffffff;
            margin: 0;
            padding: 0;
        }

        /* Map styles */
        #map {
            width: 100%;
            height: 708px;
            margin-top: 0px;
        }

        /* Popup styles */
        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 999;
            background-color: rgb(226, 225, 208);
            border: 1px solid #ccc;
            border-radius: 10%;
            padding: 20px;
            box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
            max-width: 300px;
        }

        .popup-content img {
            max-width: 100%;
            height: 100%;
            opacity: 100%;
            margin-bottom: 0px;
            border-radius: 10px;
            margin: 0 auto 10px; /* Center the image */
        }

        .popup-content b {
            font-size: 1.5em; /* Adjust the font size here */
        }

        /* Popup styles */
        .popup-content {
            text-align: center;
        }

        /* Close button styles */
        .close {
            position: absolute;
            top: 5px;
            right: 10px;
            font-size: 20px;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <div id="infoPopup" class="popup">
        <span class="close">&times;</span>
        <div class="popup-content" id="popupContent">
            <!-- Content will be dynamically inserted here -->
        </div>
    </div>

    <!-- Map container -->
    <div id="map"></div>

    <script>
        var iconoRestaurante = L.icon({
            iconUrl: 'restaurantes.png',
            iconSize: [35, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34]
        });
    
        var iconoPersona = L.icon({
            iconUrl: 'persona.png',
            iconSize: [39, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34]
        });
    
        const map = L.map('map').setView([11.019935559804493, -74.85108726909156], 19);
    
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
    
        var markerPersona = L.marker([11.019333003765201, -74.85082301137982], { icon: iconoPersona }).addTo(map);
    
        var restaurantes = [
            { nombre: 'Bocas de Ceniza', lat: 11.020920422758872, lng: -74.85173581187154, descuento: 'Descuento 15% en postres y Bebidas', image: 'postres.jpg' },
            { nombre: 'Cafe Du Nord', lat: 11.019628006525995, lng: -74.85023193420321, descuento: '60% en Segundo platillo', image: 'cafe.jpg' },
            { nombre: 'El Cami√≥n', lat: 11.018997806630223, lng: -74.84988567103223, descuento: '30% en Hamburguesas', image: 'hamburguesas.jpg' },
            { nombre: 'Restaurante 1966', lat: 11.018872992933467, lng: -74.85010884624204, descuento: '2x1 en Malteadas', image: 'bebidas.jpg' },
            { nombre: 'Du Nord Terrase', lat: 11.020336019340325, lng: -74.85057474102813, descuento: '40% en Waffles', image: 'waffles.jpg' },
        ];

        function openPopup(restaurant) {
            var popup = document.getElementById('infoPopup');
            var popupContent = document.getElementById('popupContent');
            
            popupContent.innerHTML = '<b>' + restaurant.nombre + '</b><br>' +
                                    '<img src="' + restaurant.image + '" alt="' + restaurant.nombre + ' Image"><br>' +
                                    restaurant.descuento;

            popup.style.display = 'block';
        }

        var closeBtn = document.querySelector('.close');
        closeBtn.addEventListener('click', function() {
            var popup = document.getElementById('infoPopup');
            popup.style.display = 'none';
        });

        for (var i = 0; i < restaurantes.length; i++) {
            var restaurant = restaurantes[i];
            var marker = L.marker([restaurant.lat, restaurant.lng], { icon: iconoRestaurante }).addTo(map);

            marker.on('click', function(restaurant) {
                return function() {
                    openPopup(restaurant);
                };
            }(restaurant));
        }
    </script>
</body>
</html>
